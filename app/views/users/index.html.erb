<h1>Users</h1>

<div class="table-responsive text-nowrap">
  <% if can? :create, User %>
    <div class="text-left">
        <%= link_to 'New User', new_user_path, class: 'btn btn-primary' %>
    </div>
  <% end %>
<p>&nbsp;</p>
  <table class="table table-hover">
    <tr>
      <th>Administrator</th>
      <th>Moderator</th>
      <th>Publisher</th>
      <th>User Name</th>
      <th>Email</th>
      <th></th>
    </tr>

    <% @users.each do |user| %>
      <tr>
        <td><%= user.admin %></td>
        <td><%= user.mod %></td>
        <td><%= user.pub %></td>
        <td><%= user.username %></td>
        <td><%= user.email %></td>
        <td class="text-right">
            <%= link_to '<i class="glyphicon glyphicon-eye-open"></i>'.html_safe, user , class: 'btn btn-default'%>
            <% if can? :update, User %>
            <%= link_to '<i class="glyphicon glyphicon-pencil"></i>'.html_safe, edit_user_path(user) , class: 'btn btn-default'%>
            <% end %>
            <% if can? :destroy, User %>
              <% if current_user.id != user.id %>
              <%= link_to '<i class="glyphicon glyphicon-remove"></i>'.html_safe, user, 
              method: :delete, 
              data: { confirm: 'Are you sure you want to delete this user?' }, class: 'btn btn-default' %>
              <% end %>
            <% end %>
        </td>
      </tr>
    <% end %>
  </table>
</div>

